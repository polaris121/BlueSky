{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\collection\\collection_utils.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/mongo/collection/collection_utils.js","filename":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\collection\\collection_utils.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky","root":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\collection\\collection_utils.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/mongo/collection/collection_utils.js"}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nmodule.export({\n  ID_GENERATORS: () => ID_GENERATORS,\n  setupConnection: () => setupConnection,\n  setupDriver: () => setupDriver,\n  setupAutopublish: () => setupAutopublish,\n  setupMutationMethods: () => setupMutationMethods,\n  validateCollectionName: () => validateCollectionName,\n  normalizeOptions: () => normalizeOptions\n});\nconst ID_GENERATORS = {\n  MONGO(name) {\n    return function () {\n      const src = name ? DDP.randomStream('/collection/' + name) : Random.insecure;\n      return new Mongo.ObjectID(src.hexString(24));\n    };\n  },\n  STRING(name) {\n    return function () {\n      const src = name ? DDP.randomStream('/collection/' + name) : Random.insecure;\n      return src.id();\n    };\n  }\n};\nfunction setupConnection(name, options) {\n  if (!name || options.connection === null) return null;\n  if (options.connection) return options.connection;\n  return Meteor.isClient ? Meteor.connection : Meteor.server;\n}\nfunction setupDriver(name, connection, options) {\n  if (options._driver) return options._driver;\n  if (name && connection === Meteor.server && typeof MongoInternals !== 'undefined' && MongoInternals.defaultRemoteCollectionDriver) {\n    return MongoInternals.defaultRemoteCollectionDriver();\n  }\n  const {\n    LocalCollectionDriver\n  } = require('../local_collection_driver.js');\n  return LocalCollectionDriver;\n}\nfunction setupAutopublish(collection, name, options) {\n  if (Package.autopublish && !options._preventAutopublish && collection._connection && collection._connection.publish) {\n    collection._connection.publish(null, () => collection.find(), {\n      is_auto: true\n    });\n  }\n}\nfunction setupMutationMethods(collection, name, options) {\n  if (options.defineMutationMethods === false) return;\n  try {\n    collection._defineMutationMethods({\n      useExisting: options._suppressSameNameError === true\n    });\n  } catch (error) {\n    if (error.message === \"A method named '/\".concat(name, \"/insertAsync' is already defined\")) {\n      throw new Error(\"There is already a collection named \\\"\".concat(name, \"\\\"\"));\n    }\n    throw error;\n  }\n}\nfunction validateCollectionName(name) {\n  if (!name && name !== null) {\n    Meteor._debug('Warning: creating anonymous collection. It will not be ' + 'saved or synchronized over the network. (Pass null for ' + 'the collection name to turn off this warning.)');\n    name = null;\n  }\n  if (name !== null && typeof name !== 'string') {\n    throw new Error('First argument to new Mongo.Collection must be a string or null');\n  }\n  return name;\n}\nfunction normalizeOptions(options) {\n  if (options && options.methods) {\n    // Backwards compatibility hack with original signature\n    options = {\n      connection: options\n    };\n  }\n  // Backwards compatibility: \"connection\" used to be called \"manager\".\n  if (options && options.manager && !options.connection) {\n    options.connection = options.manager;\n  }\n  return _objectSpread({\n    connection: undefined,\n    idGeneration: 'STRING',\n    transform: null,\n    _driver: undefined,\n    _preventAutopublish: false\n  }, options);\n}","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","ID_GENERATORS","setupConnection","setupDriver","setupAutopublish","setupMutationMethods","validateCollectionName","normalizeOptions","MONGO","name","src","DDP","randomStream","Random","insecure","Mongo","ObjectID","hexString","STRING","id","options","connection","Meteor","isClient","server","_driver","MongoInternals","defaultRemoteCollectionDriver","LocalCollectionDriver","require","collection","Package","autopublish","_preventAutopublish","_connection","publish","find","is_auto","defineMutationMethods","_defineMutationMethods","useExisting","_suppressSameNameError","error","message","concat","Error","_debug","methods","manager","undefined","idGeneration","transform"],"sources":["packages/mongo/collection/collection_utils.js"],"sourcesContent":["export const ID_GENERATORS = {\n  MONGO(name) {\n    return function() {\n      const src = name ? DDP.randomStream('/collection/' + name) : Random.insecure;\n      return new Mongo.ObjectID(src.hexString(24));\n    }\n  },\n  STRING(name) {\n    return function() {\n      const src = name ? DDP.randomStream('/collection/' + name) : Random.insecure;\n      return src.id();\n    }\n  }\n};\n\nexport function setupConnection(name, options) {\n  if (!name || options.connection === null) return null;\n  if (options.connection) return options.connection;\n  return Meteor.isClient ? Meteor.connection : Meteor.server;\n}\n\nexport function setupDriver(name, connection, options) {\n  if (options._driver) return options._driver;\n\n  if (name &&\n    connection === Meteor.server &&\n    typeof MongoInternals !== 'undefined' &&\n    MongoInternals.defaultRemoteCollectionDriver) {\n    return MongoInternals.defaultRemoteCollectionDriver();\n  }\n\n  const { LocalCollectionDriver } = require('../local_collection_driver.js');\n  return LocalCollectionDriver;\n}\n\nexport function setupAutopublish(collection, name, options) {\n  if (Package.autopublish &&\n    !options._preventAutopublish &&\n    collection._connection &&\n    collection._connection.publish) {\n    collection._connection.publish(null, () => collection.find(), {\n      is_auto: true\n    });\n  }\n}\n\nexport function setupMutationMethods(collection, name, options) {\n  if (options.defineMutationMethods === false) return;\n\n  try {\n    collection._defineMutationMethods({\n      useExisting: options._suppressSameNameError === true\n    });\n  } catch (error) {\n    if (error.message === `A method named '/${name}/insertAsync' is already defined`) {\n      throw new Error(`There is already a collection named \"${name}\"`);\n    }\n    throw error;\n  }\n}\n\nexport function validateCollectionName(name) {\n  if (!name && name !== null) {\n    Meteor._debug(\n      'Warning: creating anonymous collection. It will not be ' +\n      'saved or synchronized over the network. (Pass null for ' +\n      'the collection name to turn off this warning.)'\n    );\n    name = null;\n  }\n\n  if (name !== null && typeof name !== 'string') {\n    throw new Error(\n      'First argument to new Mongo.Collection must be a string or null'\n    );\n  }\n\n  return name;\n}\n\nexport function normalizeOptions(options) {\n  if (options && options.methods) {\n    // Backwards compatibility hack with original signature\n    options = { connection: options };\n  }\n  // Backwards compatibility: \"connection\" used to be called \"manager\".\n  if (options && options.manager && !options.connection) {\n    options.connection = options.manager;\n  }\n\n  return {\n    connection: undefined,\n    idGeneration: 'STRING',\n    transform: null,\n    _driver: undefined,\n    _preventAutopublish: false,\n    ...options,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"b91554f87dcf570113b67ef7b78edbaaf94bebda"}
