{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\collection\\collection.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/mongo/collection/collection.js","filename":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\collection\\collection.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky","root":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\collection\\collection.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/mongo/collection/collection.js"}},"code":"!function (module1) {\n  var _regeneratorRuntime;\n  module1.link(\"@babel/runtime/regenerator\", {\n    default: function (v) {\n      _regeneratorRuntime = v;\n    }\n  }, 0);\n  var _objectSpread;\n  module1.link(\"@babel/runtime/helpers/objectSpread2\", {\n    default: function (v) {\n      _objectSpread = v;\n    }\n  }, 1);\n  var _slicedToArray;\n  module1.link(\"@babel/runtime/helpers/slicedToArray\", {\n    default: function (v) {\n      _slicedToArray = v;\n    }\n  }, 2);\n  var normalizeProjection;\n  module1.link(\"../mongo_utils\", {\n    normalizeProjection: function (v) {\n      normalizeProjection = v;\n    }\n  }, 0);\n  var AsyncMethods;\n  module1.link(\"./methods_async\", {\n    AsyncMethods: function (v) {\n      AsyncMethods = v;\n    }\n  }, 1);\n  var SyncMethods;\n  module1.link(\"./methods_sync\", {\n    SyncMethods: function (v) {\n      SyncMethods = v;\n    }\n  }, 2);\n  var IndexMethods;\n  module1.link(\"./methods_index\", {\n    IndexMethods: function (v) {\n      IndexMethods = v;\n    }\n  }, 3);\n  var ID_GENERATORS, normalizeOptions, setupAutopublish, setupConnection, setupDriver, setupMutationMethods, validateCollectionName;\n  module1.link(\"./collection_utils\", {\n    ID_GENERATORS: function (v) {\n      ID_GENERATORS = v;\n    },\n    normalizeOptions: function (v) {\n      normalizeOptions = v;\n    },\n    setupAutopublish: function (v) {\n      setupAutopublish = v;\n    },\n    setupConnection: function (v) {\n      setupConnection = v;\n    },\n    setupDriver: function (v) {\n      setupDriver = v;\n    },\n    setupMutationMethods: function (v) {\n      setupMutationMethods = v;\n    },\n    validateCollectionName: function (v) {\n      validateCollectionName = v;\n    }\n  }, 4);\n  var ReplicationMethods;\n  module1.link(\"./methods_replication\", {\n    ReplicationMethods: function (v) {\n      ReplicationMethods = v;\n    }\n  }, 5);\n  var watchChangeStream;\n  module1.link(\"./watch_change_stream\", {\n    watchChangeStream: function (v) {\n      watchChangeStream = v;\n    }\n  }, 6);\n  /**\n   * @summary Namespace for MongoDB-related items\n   * @namespace\n   */\n  Mongo = {};\n\n  /**\n   * @summary Constructor for a Collection\n   * @locus Anywhere\n   * @instancename collection\n   * @class\n   * @param {String} name The name of the collection.  If null, creates an unmanaged (unsynchronized) local collection.\n   * @param {Object} [options]\n   * @param {Object} options.connection The server connection that will manage this collection. Uses the default connection if not specified.  Pass the return value of calling [`DDP.connect`](#DDP-connect) to specify a different server. Pass `null` to specify no connection. Unmanaged (`name` is null) collections cannot specify a connection.\n   * @param {String} options.idGeneration The method of generating the `_id` fields of new documents in this collection.  Possible values:\n  \n   - **`'STRING'`**: random strings\n   - **`'MONGO'`**:  random [`Mongo.ObjectID`](#mongo_object_id) values\n  \n  The default id generation technique is `'STRING'`.\n   * @param {Function} options.transform An optional transformation function. Documents will be passed through this function before being returned from `fetch` or `findOneAsync`, and before being passed to callbacks of `observe`, `map`, `forEach`, `allow`, and `deny`. Transforms are *not* applied for the callbacks of `observeChanges` or to cursors returned from publish functions.\n   * @param {Boolean} options.defineMutationMethods Set to `false` to skip setting up the mutation methods that enable insert/update/remove from client code. Default `true`.\n   */\n  // Main Collection constructor\n  Mongo.Collection = function () {\n    function Collection(name, options) {\n      var _ID_GENERATORS$option, _ID_GENERATORS;\n      name = validateCollectionName(name);\n      options = normalizeOptions(options);\n      this._makeNewID = (_ID_GENERATORS$option = (_ID_GENERATORS = ID_GENERATORS)[options.idGeneration]) === null || _ID_GENERATORS$option === void 0 ? void 0 : _ID_GENERATORS$option.call(_ID_GENERATORS, name);\n      this._transform = LocalCollection.wrapTransform(options.transform);\n      this.resolverType = options.resolverType;\n      this._connection = setupConnection(name, options);\n      var driver = setupDriver(name, this._connection, options);\n      this._driver = driver;\n      this._collection = driver.open(name, this._connection);\n      this._name = name;\n      this._settingUpReplicationPromise = this._maybeSetUpReplication(name, options);\n      setupMutationMethods(this, name, options);\n      setupAutopublish(this, name, options);\n      Mongo._collections.set(name, this);\n    }\n    return Collection;\n  }();\n  Object.assign(Mongo.Collection.prototype, {\n    _getFindSelector: function (args) {\n      if (args.length == 0) return {};else return args[0];\n    },\n    _getFindOptions: function (args) {\n      var _ref = args || [],\n        _ref2 = _slicedToArray(_ref, 2),\n        options = _ref2[1];\n      var newOptions = normalizeProjection(options);\n      var self = this;\n      if (args.length < 2) {\n        return {\n          transform: self._transform\n        };\n      } else {\n        check(newOptions, Match.Optional(Match.ObjectIncluding({\n          projection: Match.Optional(Match.OneOf(Object, undefined)),\n          sort: Match.Optional(Match.OneOf(Object, Array, Function, undefined)),\n          limit: Match.Optional(Match.OneOf(Number, undefined)),\n          skip: Match.Optional(Match.OneOf(Number, undefined))\n        })));\n        return _objectSpread({\n          transform: self._transform\n        }, newOptions);\n      }\n    }\n  });\n  Object.assign(Mongo.Collection, {\n    _publishCursor: function () {\n      function _callee2(cursor, sub, collection) {\n        var observeHandle;\n        return _regeneratorRuntime.async(function (_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 1;\n              return _regeneratorRuntime.awrap(cursor.observeChanges({\n                added: function (id, fields) {\n                  sub.added(collection, id, fields);\n                },\n                changed: function (id, fields) {\n                  sub.changed(collection, id, fields);\n                },\n                removed: function (id) {\n                  sub.removed(collection, id);\n                }\n              },\n              // Publications don't mutate the documents\n              // This is tested by the `livedata - publish callbacks clone` test\n              {\n                nonMutatingCallbacks: true\n              }));\n            case 1:\n              observeHandle = _context2.sent;\n              // We don't call sub.ready() here: it gets called in livedata_server, after\n              // possibly calling _publishCursor on multiple returned cursors.\n\n              // register stop callback (expects lambda w/ no args).\n              sub.onStop(function () {\n                function _callee() {\n                  return _regeneratorRuntime.async(function (_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 1;\n                        return _regeneratorRuntime.awrap(observeHandle.stop());\n                      case 1:\n                        return _context.abrupt(\"return\", _context.sent);\n                      case 2:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, null, null, null, Promise);\n                }\n                return _callee;\n              }());\n\n              // return the observeHandle in case it needs to be stopped early\n              return _context2.abrupt(\"return\", observeHandle);\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, null, null, null, Promise);\n      }\n      return _callee2;\n    }(),\n    // protect against dangerous selectors.  falsey and {_id: falsey} are both\n    // likely programmer error, and not what you want, particularly for destructive\n    // operations. If a falsey _id is sent in, a new string _id will be\n    // generated and returned; if a fallbackId is provided, it will be returned\n    // instead.\n    _rewriteSelector: function (selector) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        fallbackId = _ref3.fallbackId;\n      // shorthand -- scalars match _id\n      if (LocalCollection._selectorIsId(selector)) selector = {\n        _id: selector\n      };\n      if (Array.isArray(selector)) {\n        // This is consistent with the Mongo console itself; if we don't do this\n        // check passing an empty array ends up selecting all items\n        throw new Error(\"Mongo selector can't be an array.\");\n      }\n      if (!selector || '_id' in selector && !selector._id) {\n        // can't match anything\n        return {\n          _id: fallbackId || Random.id()\n        };\n      }\n      return selector;\n    }\n  });\n  Object.assign(Mongo.Collection.prototype, ReplicationMethods, SyncMethods, AsyncMethods, IndexMethods);\n  Object.assign(Mongo.Collection.prototype, {\n    // Determine if this collection is simply a minimongo representation of a real\n    // database on another server\n    _isRemoteCollection: function () {\n      // XXX see #MeteorServerNull\n      return this._connection && this._connection !== Meteor.server;\n    },\n    dropCollectionAsync: function () {\n      function _callee3() {\n        var self;\n        return _regeneratorRuntime.async(function (_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              self = this;\n              if (self._collection.dropCollectionAsync) {\n                _context3.next = 1;\n                break;\n              }\n              throw new Error('Can only call dropCollectionAsync on server collections');\n            case 1:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(self._collection.dropCollectionAsync());\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, null, this, null, Promise);\n      }\n      return _callee3;\n    }(),\n    createCappedCollectionAsync: function () {\n      function _callee4(byteSize, maxDocuments) {\n        var self;\n        return _regeneratorRuntime.async(function (_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              self = this;\n              _context4.next = 1;\n              return _regeneratorRuntime.awrap(self._collection.createCappedCollectionAsync);\n            case 1:\n              if (_context4.sent) {\n                _context4.next = 2;\n                break;\n              }\n              throw new Error('Can only call createCappedCollectionAsync on server collections');\n            case 2:\n              _context4.next = 3;\n              return _regeneratorRuntime.awrap(self._collection.createCappedCollectionAsync(byteSize, maxDocuments));\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, null, this, null, Promise);\n      }\n      return _callee4;\n    }(),\n    /**\n     * @summary Returns the [`Collection`](http://mongodb.github.io/node-mongodb-native/3.0/api/Collection.html) object corresponding to this collection from the [npm `mongodb` driver module](https://www.npmjs.com/package/mongodb) which is wrapped by `Mongo.Collection`.\n     * @locus Server\n     * @memberof Mongo.Collection\n     * @instance\n     */\n    rawCollection: function () {\n      var self = this;\n      if (!self._collection.rawCollection) {\n        throw new Error('Can only call rawCollection on server collections');\n      }\n      return self._collection.rawCollection();\n    },\n    /**\n     * @summary Returns the [`Db`](http://mongodb.github.io/node-mongodb-native/3.0/api/Db.html) object corresponding to this collection's database connection from the [npm `mongodb` driver module](https://www.npmjs.com/package/mongodb) which is wrapped by `Mongo.Collection`.\n     * @locus Server\n     * @memberof Mongo.Collection\n     * @instance\n     */\n    rawDatabase: function () {\n      var self = this;\n      if (!(self._driver.mongo && self._driver.mongo.db)) {\n        throw new Error('Can only call rawDatabase on server collections');\n      }\n      return self._driver.mongo.db;\n    }\n  });\n  Object.assign(Mongo, {\n    /**\n     * @summary Retrieve a Meteor collection instance by name. Only collections defined with [`new Mongo.Collection(...)`](#collections) are available with this method. For plain MongoDB collections, you'll want to look at [`rawDatabase()`](#Mongo-Collection-rawDatabase).\n     * @locus Anywhere\n     * @memberof Mongo\n     * @static\n     * @param {string} name Name of your collection as it was defined with `new Mongo.Collection()`.\n     * @returns {Mongo.Collection | undefined}\n     */\n    getCollection: function (name) {\n      return this._collections.get(name);\n    },\n    /**\n     * @summary A record of all defined Mongo.Collection instances, indexed by collection name.\n     * @type {Map<string, Mongo.Collection>}\n     * @memberof Mongo\n     * @protected\n     */\n    _collections: new Map()\n  });\n\n  /**\n   * @summary Create a Mongo-style `ObjectID`.  If you don't specify a `hexString`, the `ObjectID` will be generated randomly (not using MongoDB's ID construction rules).\n   * @locus Anywhere\n   * @class\n   * @param {String} [hexString] Optional.  The 24-character hexadecimal contents of the ObjectID to create\n   */\n  Mongo.ObjectID = MongoID.ObjectID;\n\n  /**\n   * @summary To create a cursor, use find. To access the documents in a cursor, use forEach, map, or fetch.\n   * @class\n   * @instanceName cursor\n   */\n  Mongo.Cursor = LocalCollection.Cursor;\n\n  /**\n   * @deprecated in 0.9.1\n   */\n  Mongo.Collection.Cursor = Mongo.Cursor;\n\n  /**\n   * @deprecated in 0.9.1\n   */\n  Mongo.Collection.ObjectID = Mongo.ObjectID;\n\n  /**\n   * @deprecated in 0.9.1\n   */\n  Meteor.Collection = Mongo.Collection;\n\n  // Allow deny stuff is now in the allow-deny package\n  Object.assign(Mongo.Collection.prototype, AllowDeny.CollectionPrototype);\n\n  // Só agora que Mongo.Collection existe, adicionamos o método ao prototype\n  Object.assign(Mongo.Collection.prototype, {\n    watchChangeStream: watchChangeStream\n  });\n}.call(this, module);","map":{"version":3,"names":["_regeneratorRuntime","module1","link","default","v","_objectSpread","_slicedToArray","normalizeProjection","AsyncMethods","SyncMethods","IndexMethods","ID_GENERATORS","normalizeOptions","setupAutopublish","setupConnection","setupDriver","setupMutationMethods","validateCollectionName","ReplicationMethods","watchChangeStream","Mongo","Collection","name","options","_ID_GENERATORS$option","_ID_GENERATORS","_makeNewID","idGeneration","call","_transform","LocalCollection","wrapTransform","transform","resolverType","_connection","driver","_driver","_collection","open","_name","_settingUpReplicationPromise","_maybeSetUpReplication","_collections","set","Object","assign","prototype","_getFindSelector","args","length","_getFindOptions","_ref","_ref2","newOptions","self","check","Match","Optional","ObjectIncluding","projection","OneOf","undefined","sort","Array","Function","limit","Number","skip","_publishCursor","_callee2","cursor","sub","collection","observeHandle","async","_context2","prev","next","awrap","observeChanges","added","id","fields","changed","removed","nonMutatingCallbacks","sent","onStop","_callee","_context","stop","abrupt","Promise","_rewriteSelector","selector","_ref3","arguments","fallbackId","_selectorIsId","_id","isArray","Error","Random","_isRemoteCollection","Meteor","server","dropCollectionAsync","_callee3","_context3","createCappedCollectionAsync","_callee4","byteSize","maxDocuments","_context4","rawCollection","rawDatabase","mongo","db","getCollection","get","Map","ObjectID","MongoID","Cursor","AllowDeny","CollectionPrototype","module"],"sources":["packages/mongo/collection/collection.js"],"sourcesContent":["import { normalizeProjection } from \"../mongo_utils\";\nimport { AsyncMethods } from './methods_async';\nimport { SyncMethods } from './methods_sync';\nimport { IndexMethods } from './methods_index';\nimport {\n  ID_GENERATORS, normalizeOptions,\n  setupAutopublish,\n  setupConnection,\n  setupDriver,\n  setupMutationMethods,\n  validateCollectionName\n} from './collection_utils';\nimport { ReplicationMethods } from './methods_replication';\nimport { watchChangeStream } from './watch_change_stream';\n\n/**\n * @summary Namespace for MongoDB-related items\n * @namespace\n */\nMongo = {};\n\n/**\n * @summary Constructor for a Collection\n * @locus Anywhere\n * @instancename collection\n * @class\n * @param {String} name The name of the collection.  If null, creates an unmanaged (unsynchronized) local collection.\n * @param {Object} [options]\n * @param {Object} options.connection The server connection that will manage this collection. Uses the default connection if not specified.  Pass the return value of calling [`DDP.connect`](#DDP-connect) to specify a different server. Pass `null` to specify no connection. Unmanaged (`name` is null) collections cannot specify a connection.\n * @param {String} options.idGeneration The method of generating the `_id` fields of new documents in this collection.  Possible values:\n\n - **`'STRING'`**: random strings\n - **`'MONGO'`**:  random [`Mongo.ObjectID`](#mongo_object_id) values\n\nThe default id generation technique is `'STRING'`.\n * @param {Function} options.transform An optional transformation function. Documents will be passed through this function before being returned from `fetch` or `findOneAsync`, and before being passed to callbacks of `observe`, `map`, `forEach`, `allow`, and `deny`. Transforms are *not* applied for the callbacks of `observeChanges` or to cursors returned from publish functions.\n * @param {Boolean} options.defineMutationMethods Set to `false` to skip setting up the mutation methods that enable insert/update/remove from client code. Default `true`.\n */\n// Main Collection constructor\nMongo.Collection = function Collection(name, options) {\n  name = validateCollectionName(name);\n\n  options = normalizeOptions(options);\n\n  this._makeNewID = ID_GENERATORS[options.idGeneration]?.(name);\n\n  this._transform = LocalCollection.wrapTransform(options.transform);\n  this.resolverType = options.resolverType;\n\n  this._connection = setupConnection(name, options);\n\n  const driver = setupDriver(name, this._connection, options);\n  this._driver = driver;\n\n  this._collection = driver.open(name, this._connection);\n  this._name = name;\n\n  this._settingUpReplicationPromise = this._maybeSetUpReplication(name, options);\n\n  setupMutationMethods(this, name, options);\n\n  setupAutopublish(this, name, options);\n\n  Mongo._collections.set(name, this);\n};\n\nObject.assign(Mongo.Collection.prototype, {\n  _getFindSelector(args) {\n    if (args.length == 0) return {};\n    else return args[0];\n  },\n\n  _getFindOptions(args) {\n    const [, options] = args || [];\n    const newOptions = normalizeProjection(options);\n\n    var self = this;\n    if (args.length < 2) {\n      return { transform: self._transform };\n    } else {\n      check(\n        newOptions,\n        Match.Optional(\n          Match.ObjectIncluding({\n            projection: Match.Optional(Match.OneOf(Object, undefined)),\n            sort: Match.Optional(\n              Match.OneOf(Object, Array, Function, undefined)\n            ),\n            limit: Match.Optional(Match.OneOf(Number, undefined)),\n            skip: Match.Optional(Match.OneOf(Number, undefined)),\n          })\n        )\n      );\n\n      return {\n        transform: self._transform,\n        ...newOptions,\n      };\n    }\n  },\n});\n\nObject.assign(Mongo.Collection, {\n  async _publishCursor(cursor, sub, collection) {\n    var observeHandle = await cursor.observeChanges(\n        {\n          added: function(id, fields) {\n            sub.added(collection, id, fields);\n          },\n          changed: function(id, fields) {\n            sub.changed(collection, id, fields);\n          },\n          removed: function(id) {\n            sub.removed(collection, id);\n          },\n        },\n        // Publications don't mutate the documents\n        // This is tested by the `livedata - publish callbacks clone` test\n        { nonMutatingCallbacks: true }\n    );\n\n    // We don't call sub.ready() here: it gets called in livedata_server, after\n    // possibly calling _publishCursor on multiple returned cursors.\n\n    // register stop callback (expects lambda w/ no args).\n    sub.onStop(async function() {\n      return await observeHandle.stop();\n    });\n\n    // return the observeHandle in case it needs to be stopped early\n    return observeHandle;\n  },\n\n  // protect against dangerous selectors.  falsey and {_id: falsey} are both\n  // likely programmer error, and not what you want, particularly for destructive\n  // operations. If a falsey _id is sent in, a new string _id will be\n  // generated and returned; if a fallbackId is provided, it will be returned\n  // instead.\n  _rewriteSelector(selector, { fallbackId } = {}) {\n    // shorthand -- scalars match _id\n    if (LocalCollection._selectorIsId(selector)) selector = { _id: selector };\n\n    if (Array.isArray(selector)) {\n      // This is consistent with the Mongo console itself; if we don't do this\n      // check passing an empty array ends up selecting all items\n      throw new Error(\"Mongo selector can't be an array.\");\n    }\n\n    if (!selector || ('_id' in selector && !selector._id)) {\n      // can't match anything\n      return { _id: fallbackId || Random.id() };\n    }\n\n    return selector;\n  },\n});\n\nObject.assign(Mongo.Collection.prototype, ReplicationMethods, SyncMethods, AsyncMethods, IndexMethods);\n\nObject.assign(Mongo.Collection.prototype, {\n  // Determine if this collection is simply a minimongo representation of a real\n  // database on another server\n  _isRemoteCollection() {\n    // XXX see #MeteorServerNull\n    return this._connection && this._connection !== Meteor.server;\n  },\n\n  async dropCollectionAsync() {\n    var self = this;\n    if (!self._collection.dropCollectionAsync)\n      throw new Error('Can only call dropCollectionAsync on server collections');\n   await self._collection.dropCollectionAsync();\n  },\n\n  async createCappedCollectionAsync(byteSize, maxDocuments) {\n    var self = this;\n    if (! await self._collection.createCappedCollectionAsync)\n      throw new Error(\n        'Can only call createCappedCollectionAsync on server collections'\n      );\n    await self._collection.createCappedCollectionAsync(byteSize, maxDocuments);\n  },\n\n  /**\n   * @summary Returns the [`Collection`](http://mongodb.github.io/node-mongodb-native/3.0/api/Collection.html) object corresponding to this collection from the [npm `mongodb` driver module](https://www.npmjs.com/package/mongodb) which is wrapped by `Mongo.Collection`.\n   * @locus Server\n   * @memberof Mongo.Collection\n   * @instance\n   */\n  rawCollection() {\n    var self = this;\n    if (!self._collection.rawCollection) {\n      throw new Error('Can only call rawCollection on server collections');\n    }\n    return self._collection.rawCollection();\n  },\n\n  /**\n   * @summary Returns the [`Db`](http://mongodb.github.io/node-mongodb-native/3.0/api/Db.html) object corresponding to this collection's database connection from the [npm `mongodb` driver module](https://www.npmjs.com/package/mongodb) which is wrapped by `Mongo.Collection`.\n   * @locus Server\n   * @memberof Mongo.Collection\n   * @instance\n   */\n  rawDatabase() {\n    var self = this;\n    if (!(self._driver.mongo && self._driver.mongo.db)) {\n      throw new Error('Can only call rawDatabase on server collections');\n    }\n    return self._driver.mongo.db;\n  },\n});\n\nObject.assign(Mongo, {\n  /**\n   * @summary Retrieve a Meteor collection instance by name. Only collections defined with [`new Mongo.Collection(...)`](#collections) are available with this method. For plain MongoDB collections, you'll want to look at [`rawDatabase()`](#Mongo-Collection-rawDatabase).\n   * @locus Anywhere\n   * @memberof Mongo\n   * @static\n   * @param {string} name Name of your collection as it was defined with `new Mongo.Collection()`.\n   * @returns {Mongo.Collection | undefined}\n   */\n  getCollection(name) {\n    return this._collections.get(name);\n  },\n\n  /**\n   * @summary A record of all defined Mongo.Collection instances, indexed by collection name.\n   * @type {Map<string, Mongo.Collection>}\n   * @memberof Mongo\n   * @protected\n   */\n  _collections: new Map(),\n})\n\n\n\n/**\n * @summary Create a Mongo-style `ObjectID`.  If you don't specify a `hexString`, the `ObjectID` will be generated randomly (not using MongoDB's ID construction rules).\n * @locus Anywhere\n * @class\n * @param {String} [hexString] Optional.  The 24-character hexadecimal contents of the ObjectID to create\n */\nMongo.ObjectID = MongoID.ObjectID;\n\n/**\n * @summary To create a cursor, use find. To access the documents in a cursor, use forEach, map, or fetch.\n * @class\n * @instanceName cursor\n */\nMongo.Cursor = LocalCollection.Cursor;\n\n/**\n * @deprecated in 0.9.1\n */\nMongo.Collection.Cursor = Mongo.Cursor;\n\n/**\n * @deprecated in 0.9.1\n */\nMongo.Collection.ObjectID = Mongo.ObjectID;\n\n/**\n * @deprecated in 0.9.1\n */\nMeteor.Collection = Mongo.Collection;\n\n\n// Allow deny stuff is now in the allow-deny package\nObject.assign(Mongo.Collection.prototype, AllowDeny.CollectionPrototype);\n\n// Só agora que Mongo.Collection existe, adicionamos o método ao prototype\nObject.assign(Mongo.Collection.prototype, { watchChangeStream });\n\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"623f90d59e436224bb4b7b539e247fc5241a1788"}
