{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\mongo_driver.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.windows.x86_64"},"sourceFileName":"packages/mongo/mongo_driver.js","filename":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\mongo_driver.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky","root":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\mongo_driver.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/mongo/mongo_driver.js"}},"code":"!module.wrapAsync(async function (module1, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    module1.export({\n      listenAll: () => listenAll,\n      forEachTrigger: () => forEachTrigger\n    });\n    let OplogHandle;\n    module1.link(\"./oplog_tailing\", {\n      OplogHandle(v) {\n        OplogHandle = v;\n      }\n    }, 0);\n    let MongoConnection;\n    module1.link(\"./mongo_connection\", {\n      MongoConnection(v) {\n        MongoConnection = v;\n      }\n    }, 1);\n    let OplogObserveDriver;\n    module1.link(\"./oplog_observe_driver\", {\n      OplogObserveDriver(v) {\n        OplogObserveDriver = v;\n      }\n    }, 2);\n    let MongoDB;\n    module1.link(\"./mongo_common\", {\n      MongoDB(v) {\n        MongoDB = v;\n      }\n    }, 3);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    MongoInternals = global.MongoInternals = {};\n    MongoInternals.__packageName = 'mongo';\n    MongoInternals.NpmModules = {\n      mongodb: {\n        version: NpmModuleMongodbVersion,\n        module: MongoDB\n      }\n    };\n\n    // Older version of what is now available via\n    // MongoInternals.NpmModules.mongodb.module.  It was never documented, but\n    // people do use it.\n    // XXX COMPAT WITH 1.0.3.2\n    MongoInternals.NpmModule = new Proxy(MongoDB, {\n      get(target, propertyKey, receiver) {\n        if (propertyKey === 'ObjectID') {\n          Meteor.deprecate(\"Accessing 'MongoInternals.NpmModule.ObjectID' directly is deprecated. \" + \"Use 'MongoInternals.NpmModule.ObjectId' instead.\");\n        }\n        return Reflect.get(target, propertyKey, receiver);\n      }\n    });\n    MongoInternals.OplogHandle = OplogHandle;\n    MongoInternals.Connection = MongoConnection;\n    MongoInternals.OplogObserveDriver = OplogObserveDriver;\n\n    // This is used to add or remove EJSON from the beginning of everything nested\n    // inside an EJSON custom type. It should only be called on pure JSON!\n\n    // Ensure that EJSON.clone keeps a Timestamp as a Timestamp (instead of just\n    // doing a structural clone).\n    // XXX how ok is this? what if there are multiple copies of MongoDB loaded?\n    MongoDB.Timestamp.prototype.clone = function () {\n      // Timestamps should be immutable.\n      return this;\n    };\n\n    // Listen for the invalidation messages that will trigger us to poll the\n    // database for changes. If this selector specifies specific IDs, specify them\n    // here, so that updates to different specific IDs don't cause us to poll.\n    // listenCallback is the same kind of (notification, complete) callback passed\n    // to InvalidationCrossbar.listen.\n\n    const listenAll = async function (cursorDescription, listenCallback) {\n      const listeners = [];\n      await forEachTrigger(cursorDescription, function (trigger) {\n        listeners.push(DDPServer._InvalidationCrossbar.listen(trigger, listenCallback));\n      });\n      return {\n        stop: function () {\n          listeners.forEach(function (listener) {\n            listener.stop();\n          });\n        }\n      };\n    };\n    const forEachTrigger = async function (cursorDescription, triggerCallback) {\n      const key = {\n        collection: cursorDescription.collectionName\n      };\n      const specificIds = LocalCollection._idsMatchedBySelector(cursorDescription.selector);\n      if (specificIds) {\n        for (const id of specificIds) {\n          await triggerCallback(Object.assign({\n            id: id\n          }, key));\n        }\n        await triggerCallback(Object.assign({\n          dropCollection: true,\n          id: null\n        }, key));\n      } else {\n        await triggerCallback(key);\n      }\n      // Everyone cares about the database being dropped.\n      await triggerCallback({\n        dropDatabase: true\n      });\n    };\n    // XXX We probably need to find a better way to expose this. Right now\n    // it's only used by tests, but in fact you need it in normal\n    // operation to interact with capped collections.\n    MongoInternals.MongoTimestamp = MongoDB.Timestamp;\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["module1","export","listenAll","forEachTrigger","OplogHandle","link","v","MongoConnection","OplogObserveDriver","MongoDB","__reifyWaitForDeps__","MongoInternals","global","__packageName","NpmModules","mongodb","version","NpmModuleMongodbVersion","module","NpmModule","Proxy","get","target","propertyKey","receiver","Meteor","deprecate","Reflect","Connection","Timestamp","prototype","clone","cursorDescription","listenCallback","listeners","trigger","push","DDPServer","_InvalidationCrossbar","listen","stop","forEach","listener","triggerCallback","key","collection","collectionName","specificIds","LocalCollection","_idsMatchedBySelector","selector","id","Object","assign","dropCollection","dropDatabase","MongoTimestamp","__reify_async_result__","_reifyError","self","async"],"sources":["packages/mongo/mongo_driver.js"],"sourcesContent":["import { OplogHandle } from './oplog_tailing';\nimport { MongoConnection } from './mongo_connection';\nimport { OplogObserveDriver } from './oplog_observe_driver';\nimport { MongoDB } from './mongo_common';\n\nMongoInternals = global.MongoInternals = {};\n\nMongoInternals.__packageName = 'mongo';\n\nMongoInternals.NpmModules = {\n  mongodb: {\n    version: NpmModuleMongodbVersion,\n    module: MongoDB\n  }\n};\n\n// Older version of what is now available via\n// MongoInternals.NpmModules.mongodb.module.  It was never documented, but\n// people do use it.\n// XXX COMPAT WITH 1.0.3.2\nMongoInternals.NpmModule = new Proxy(MongoDB, {\n  get(target, propertyKey, receiver) {\n    if (propertyKey === 'ObjectID') {\n      Meteor.deprecate(\n        `Accessing 'MongoInternals.NpmModule.ObjectID' directly is deprecated. ` +\n        `Use 'MongoInternals.NpmModule.ObjectId' instead.`\n      );\n    }\n    return Reflect.get(target, propertyKey, receiver);\n  },\n});\n\nMongoInternals.OplogHandle = OplogHandle;\n\nMongoInternals.Connection = MongoConnection;\n\nMongoInternals.OplogObserveDriver = OplogObserveDriver;\n\n// This is used to add or remove EJSON from the beginning of everything nested\n// inside an EJSON custom type. It should only be called on pure JSON!\n\n\n// Ensure that EJSON.clone keeps a Timestamp as a Timestamp (instead of just\n// doing a structural clone).\n// XXX how ok is this? what if there are multiple copies of MongoDB loaded?\nMongoDB.Timestamp.prototype.clone = function () {\n  // Timestamps should be immutable.\n  return this;\n};\n\n// Listen for the invalidation messages that will trigger us to poll the\n// database for changes. If this selector specifies specific IDs, specify them\n// here, so that updates to different specific IDs don't cause us to poll.\n// listenCallback is the same kind of (notification, complete) callback passed\n// to InvalidationCrossbar.listen.\n\nexport const listenAll = async function (cursorDescription, listenCallback) {\n  const listeners = [];\n  await forEachTrigger(cursorDescription, function (trigger) {\n    listeners.push(DDPServer._InvalidationCrossbar.listen(\n      trigger, listenCallback));\n  });\n\n  return {\n    stop: function () {\n      listeners.forEach(function (listener) {\n        listener.stop();\n      });\n    }\n  };\n};\n\nexport const forEachTrigger = async function (cursorDescription, triggerCallback) {\n  const key = {collection: cursorDescription.collectionName};\n  const specificIds = LocalCollection._idsMatchedBySelector(\n    cursorDescription.selector);\n  if (specificIds) {\n    for (const id of specificIds) {\n      await triggerCallback(Object.assign({id: id}, key));\n    }\n    await triggerCallback(Object.assign({dropCollection: true, id: null}, key));\n  } else {\n    await triggerCallback(key);\n  }\n  // Everyone cares about the database being dropped.\n  await triggerCallback({ dropDatabase: true });\n};\n\n\n\n// XXX We probably need to find a better way to expose this. Right now\n// it's only used by tests, but in fact you need it in normal\n// operation to interact with capped collections.\nMongoInternals.MongoTimestamp = MongoDB.Timestamp;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"961f663d0a6c803c17c0ab908be2c5e4aa269f3e"}
