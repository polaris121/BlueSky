{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\observe_handle.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"packages/mongo/observe_handle.ts","filename":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\observe_handle.ts","inputSourceMap":{"version":3,"file":"packages/mongo/observe_handle.ts","sourceRoot":"","sources":["packages/mongo/observe_handle.ts"],"names":[],"mappings":"AAEA,IAAI,mBAAmB,GAAG,CAAC,CAAC;AAO5B;;;;GAIG;AACH,MAAM,OAAO,aAAa;IACxB,GAAG,CAAS;IACZ,YAAY,CAAqB;IACjC,oBAAoB,CAAU;IAC9B,QAAQ,CAAU;IAEX,uBAAuB,GAA0B,GAAG,EAAE,GAAE,CAAC,CAAC;IAC1D,eAAe,CAAe;IAErC,MAAM,CAAe;IACrB,YAAY,CAAe;IAC3B,QAAQ,CAAe;IACvB,YAAY,CAAe;IAC3B,QAAQ,CAAe;IAEvB,YAAY,WAA+B,EAAE,SAAqD,EAAE,oBAA6B;QAC/H,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAEhC,WAAW,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,CAAC,IAA2B,EAAE,EAAE;YAClE,IAAI,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC;gBACpB,IAAI,CAAC,IAAI,IAAI,EAAmC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;gBACpE,OAAO;YACT,CAAC;YAED,IAAI,IAAI,KAAK,aAAa,IAAI,SAAS,CAAC,KAAK,EAAE,CAAC;gBAC9C,IAAI,CAAC,YAAY,GAAG,KAAK,WAAW,EAAE,EAAE,MAAM,EAAE,MAAM;oBACpD,MAAM,SAAS,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;gBACpC,CAAC,CAAC;YACJ,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,GAAG,GAAG,mBAAmB,EAAE,CAAC;QACjC,IAAI,CAAC,oBAAoB,GAAG,oBAAoB,CAAC;QAEjD,IAAI,CAAC,eAAe,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3C,MAAM,KAAK,GAAG,GAAG,EAAE;gBACjB,OAAO,EAAE,CAAC;gBACV,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;YAC3C,CAAC,CAAA;YAED,MAAM,OAAO,GAAG,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;YAExC,IAAI,CAAC,uBAAuB,GAAG,GAAG,EAAE;gBAClC,KAAK,EAAE,CAAC;gBACR,YAAY,CAAC,OAAO,CAAC,CAAC;YACxB,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,IAAI,GAAG,KAAK,IAAI,EAAE;QAChB,IAAI,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,MAAM,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACjD,CAAC,CAAA;CACF","sourcesContent":["import { ObserveHandleCallback, ObserveMultiplexer } from './observe_multiplex';\n\nlet nextObserveHandleId = 1;\n\nexport type ObserveHandleCallbackInternal = '_added' | '_addedBefore' | '_changed' | '_movedBefore' | '_removed';\n\n\nexport type Callback<T = any> = (...args: T[]) => Promise<void> | void;\n\n/**\n * The \"observe handle\" returned from observeChanges.\n * Contains a reference to an ObserveMultiplexer.\n * Used to stop observation and clean up resources.\n */\nexport class ObserveHandle<T = any> {\n  _id: number;\n  _multiplexer: ObserveMultiplexer;\n  nonMutatingCallbacks: boolean;\n  _stopped: boolean;\n\n  public initialAddsSentResolver: (value: void) => void = () => {};\n  public initialAddsSent: Promise<void>\n\n  _added?: Callback<T>;\n  _addedBefore?: Callback<T>;\n  _changed?: Callback<T>;\n  _movedBefore?: Callback<T>;\n  _removed?: Callback<T>;\n\n  constructor(multiplexer: ObserveMultiplexer, callbacks: Record<ObserveHandleCallback, Callback<T>>, nonMutatingCallbacks: boolean) {\n    this._multiplexer = multiplexer;\n\n    multiplexer.callbackNames().forEach((name: ObserveHandleCallback) => {\n      if (callbacks[name]) {\n        this[`_${name}` as ObserveHandleCallbackInternal] = callbacks[name];\n        return;\n      }\n\n      if (name === \"addedBefore\" && callbacks.added) {\n        this._addedBefore = async function (id, fields, before) {\n          await callbacks.added(id, fields);\n        };\n      }\n    });\n\n    this._stopped = false;\n    this._id = nextObserveHandleId++;\n    this.nonMutatingCallbacks = nonMutatingCallbacks;\n\n    this.initialAddsSent = new Promise(resolve => {\n      const ready = () => {\n        resolve();\n        this.initialAddsSent = Promise.resolve();\n      }\n\n      const timeout = setTimeout(ready, 30000)\n\n      this.initialAddsSentResolver = () => {\n        ready();\n        clearTimeout(timeout);\n      };\n    });\n  }\n\n  /**\n   * Using property syntax and arrow function syntax to avoid binding the wrong context on callbacks.\n   */\n  stop = async () => {\n    if (this._stopped) return;\n    this._stopped = true;\n    await this._multiplexer.removeHandle(this._id);\n  }\n}"]},"targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky","root":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\snntv\\OneDrive\\Documents\\AI Agent\\projects\\Meteor\\BlueSky\\packages\\mongo\\observe_handle.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/mongo/observe_handle.ts","inputSourceMap":{"version":3,"file":"packages/mongo/observe_handle.ts","sourceRoot":"","sources":["packages/mongo/observe_handle.ts"],"names":[],"mappings":"AAEA,IAAI,mBAAmB,GAAG,CAAC,CAAC;AAO5B;;;;GAIG;AACH,MAAM,OAAO,aAAa;IACxB,GAAG,CAAS;IACZ,YAAY,CAAqB;IACjC,oBAAoB,CAAU;IAC9B,QAAQ,CAAU;IAEX,uBAAuB,GAA0B,GAAG,EAAE,GAAE,CAAC,CAAC;IAC1D,eAAe,CAAe;IAErC,MAAM,CAAe;IACrB,YAAY,CAAe;IAC3B,QAAQ,CAAe;IACvB,YAAY,CAAe;IAC3B,QAAQ,CAAe;IAEvB,YAAY,WAA+B,EAAE,SAAqD,EAAE,oBAA6B;QAC/H,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAEhC,WAAW,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,CAAC,IAA2B,EAAE,EAAE;YAClE,IAAI,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC;gBACpB,IAAI,CAAC,IAAI,IAAI,EAAmC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;gBACpE,OAAO;YACT,CAAC;YAED,IAAI,IAAI,KAAK,aAAa,IAAI,SAAS,CAAC,KAAK,EAAE,CAAC;gBAC9C,IAAI,CAAC,YAAY,GAAG,KAAK,WAAW,EAAE,EAAE,MAAM,EAAE,MAAM;oBACpD,MAAM,SAAS,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;gBACpC,CAAC,CAAC;YACJ,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,GAAG,GAAG,mBAAmB,EAAE,CAAC;QACjC,IAAI,CAAC,oBAAoB,GAAG,oBAAoB,CAAC;QAEjD,IAAI,CAAC,eAAe,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3C,MAAM,KAAK,GAAG,GAAG,EAAE;gBACjB,OAAO,EAAE,CAAC;gBACV,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;YAC3C,CAAC,CAAA;YAED,MAAM,OAAO,GAAG,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;YAExC,IAAI,CAAC,uBAAuB,GAAG,GAAG,EAAE;gBAClC,KAAK,EAAE,CAAC;gBACR,YAAY,CAAC,OAAO,CAAC,CAAC;YACxB,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,IAAI,GAAG,KAAK,IAAI,EAAE;QAChB,IAAI,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,MAAM,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACjD,CAAC,CAAA;CACF","sourcesContent":["import { ObserveHandleCallback, ObserveMultiplexer } from './observe_multiplex';\n\nlet nextObserveHandleId = 1;\n\nexport type ObserveHandleCallbackInternal = '_added' | '_addedBefore' | '_changed' | '_movedBefore' | '_removed';\n\n\nexport type Callback<T = any> = (...args: T[]) => Promise<void> | void;\n\n/**\n * The \"observe handle\" returned from observeChanges.\n * Contains a reference to an ObserveMultiplexer.\n * Used to stop observation and clean up resources.\n */\nexport class ObserveHandle<T = any> {\n  _id: number;\n  _multiplexer: ObserveMultiplexer;\n  nonMutatingCallbacks: boolean;\n  _stopped: boolean;\n\n  public initialAddsSentResolver: (value: void) => void = () => {};\n  public initialAddsSent: Promise<void>\n\n  _added?: Callback<T>;\n  _addedBefore?: Callback<T>;\n  _changed?: Callback<T>;\n  _movedBefore?: Callback<T>;\n  _removed?: Callback<T>;\n\n  constructor(multiplexer: ObserveMultiplexer, callbacks: Record<ObserveHandleCallback, Callback<T>>, nonMutatingCallbacks: boolean) {\n    this._multiplexer = multiplexer;\n\n    multiplexer.callbackNames().forEach((name: ObserveHandleCallback) => {\n      if (callbacks[name]) {\n        this[`_${name}` as ObserveHandleCallbackInternal] = callbacks[name];\n        return;\n      }\n\n      if (name === \"addedBefore\" && callbacks.added) {\n        this._addedBefore = async function (id, fields, before) {\n          await callbacks.added(id, fields);\n        };\n      }\n    });\n\n    this._stopped = false;\n    this._id = nextObserveHandleId++;\n    this.nonMutatingCallbacks = nonMutatingCallbacks;\n\n    this.initialAddsSent = new Promise(resolve => {\n      const ready = () => {\n        resolve();\n        this.initialAddsSent = Promise.resolve();\n      }\n\n      const timeout = setTimeout(ready, 30000)\n\n      this.initialAddsSentResolver = () => {\n        ready();\n        clearTimeout(timeout);\n      };\n    });\n  }\n\n  /**\n   * Using property syntax and arrow function syntax to avoid binding the wrong context on callbacks.\n   */\n  stop = async () => {\n    if (this._stopped) return;\n    this._stopped = true;\n    await this._multiplexer.removeHandle(this._id);\n  }\n}"]}}},"code":"module.export({\n  ObserveHandle: () => ObserveHandle\n});\nlet nextObserveHandleId = 1;\n/**\n * The \"observe handle\" returned from observeChanges.\n * Contains a reference to an ObserveMultiplexer.\n * Used to stop observation and clean up resources.\n */\nclass ObserveHandle {\n  constructor(multiplexer, callbacks, nonMutatingCallbacks) {\n    this._id = void 0;\n    this._multiplexer = void 0;\n    this.nonMutatingCallbacks = void 0;\n    this._stopped = void 0;\n    this.initialAddsSentResolver = () => {};\n    this.initialAddsSent = void 0;\n    this._added = void 0;\n    this._addedBefore = void 0;\n    this._changed = void 0;\n    this._movedBefore = void 0;\n    this._removed = void 0;\n    /**\n     * Using property syntax and arrow function syntax to avoid binding the wrong context on callbacks.\n     */\n    this.stop = async () => {\n      if (this._stopped) return;\n      this._stopped = true;\n      await this._multiplexer.removeHandle(this._id);\n    };\n    this._multiplexer = multiplexer;\n    multiplexer.callbackNames().forEach(name => {\n      if (callbacks[name]) {\n        this[\"_\".concat(name)] = callbacks[name];\n        return;\n      }\n      if (name === \"addedBefore\" && callbacks.added) {\n        this._addedBefore = async function (id, fields, before) {\n          await callbacks.added(id, fields);\n        };\n      }\n    });\n    this._stopped = false;\n    this._id = nextObserveHandleId++;\n    this.nonMutatingCallbacks = nonMutatingCallbacks;\n    this.initialAddsSent = new Promise(resolve => {\n      const ready = () => {\n        resolve();\n        this.initialAddsSent = Promise.resolve();\n      };\n      const timeout = setTimeout(ready, 30000);\n      this.initialAddsSentResolver = () => {\n        ready();\n        clearTimeout(timeout);\n      };\n    });\n  }\n}","map":{"version":3,"names":["module","export","ObserveHandle","nextObserveHandleId","constructor","multiplexer","callbacks","nonMutatingCallbacks","_id","_multiplexer","_stopped","initialAddsSentResolver","initialAddsSent","_added","_addedBefore","_changed","_movedBefore","_removed","stop","removeHandle","callbackNames","forEach","name","concat","added","id","fields","before","Promise","resolve","ready","timeout","setTimeout","clearTimeout"],"sources":["packages/mongo/observe_handle.ts"],"sourcesContent":["import { ObserveHandleCallback, ObserveMultiplexer } from './observe_multiplex';\n\nlet nextObserveHandleId = 1;\n\nexport type ObserveHandleCallbackInternal = '_added' | '_addedBefore' | '_changed' | '_movedBefore' | '_removed';\n\n\nexport type Callback<T = any> = (...args: T[]) => Promise<void> | void;\n\n/**\n * The \"observe handle\" returned from observeChanges.\n * Contains a reference to an ObserveMultiplexer.\n * Used to stop observation and clean up resources.\n */\nexport class ObserveHandle<T = any> {\n  _id: number;\n  _multiplexer: ObserveMultiplexer;\n  nonMutatingCallbacks: boolean;\n  _stopped: boolean;\n\n  public initialAddsSentResolver: (value: void) => void = () => {};\n  public initialAddsSent: Promise<void>\n\n  _added?: Callback<T>;\n  _addedBefore?: Callback<T>;\n  _changed?: Callback<T>;\n  _movedBefore?: Callback<T>;\n  _removed?: Callback<T>;\n\n  constructor(multiplexer: ObserveMultiplexer, callbacks: Record<ObserveHandleCallback, Callback<T>>, nonMutatingCallbacks: boolean) {\n    this._multiplexer = multiplexer;\n\n    multiplexer.callbackNames().forEach((name: ObserveHandleCallback) => {\n      if (callbacks[name]) {\n        this[`_${name}` as ObserveHandleCallbackInternal] = callbacks[name];\n        return;\n      }\n\n      if (name === \"addedBefore\" && callbacks.added) {\n        this._addedBefore = async function (id, fields, before) {\n          await callbacks.added(id, fields);\n        };\n      }\n    });\n\n    this._stopped = false;\n    this._id = nextObserveHandleId++;\n    this.nonMutatingCallbacks = nonMutatingCallbacks;\n\n    this.initialAddsSent = new Promise(resolve => {\n      const ready = () => {\n        resolve();\n        this.initialAddsSent = Promise.resolve();\n      }\n\n      const timeout = setTimeout(ready, 30000)\n\n      this.initialAddsSentResolver = () => {\n        ready();\n        clearTimeout(timeout);\n      };\n    });\n  }\n\n  /**\n   * Using property syntax and arrow function syntax to avoid binding the wrong context on callbacks.\n   */\n  stop = async () => {\n    if (this._stopped) return;\n    this._stopped = true;\n    await this._multiplexer.removeHandle(this._id);\n  }\n}"],"mappings":"AAEAA,MAAI,CAAAC,MAAA;EAAAC,aAAwB,EAAAA,CAAA,KAAAA;AAAA;AAA5B,IAAIC,mBAAmB,GAAG,CAAC;AAO3B;;;;;AAKM,MAAOD,aAAa;EAexBE,YAAYC,WAA+B,EAAEC,SAAqD,EAAEC,oBAA6B;IAAA,KAdjIC,GAAG;IAAA,KACHC,YAAY;IAAA,KACZF,oBAAoB;IAAA,KACpBG,QAAQ;IAAA,KAEDC,uBAAuB,GAA0B,MAAK,CAAE,CAAC;IAAA,KACzDC,eAAe;IAAA,KAEtBC,MAAM;IAAA,KACNC,YAAY;IAAA,KACZC,QAAQ;IAAA,KACRC,YAAY;IAAA,KACZC,QAAQ;IAqCR;;;IAAA,KAGAC,IAAI,GAAG,YAAW;MAChB,IAAI,IAAI,CAACR,QAAQ,EAAE;MACnB,IAAI,CAACA,QAAQ,GAAG,IAAI;MACpB,MAAM,IAAI,CAACD,YAAY,CAACU,YAAY,CAAC,IAAI,CAACX,GAAG,CAAC;IAChD,CAAC;IAzCC,IAAI,CAACC,YAAY,GAAGJ,WAAW;IAE/BA,WAAW,CAACe,aAAa,EAAE,CAACC,OAAO,CAAEC,IAA2B,IAAI;MAClE,IAAIhB,SAAS,CAACgB,IAAI,CAAC,EAAE;QACnB,IAAI,KAAAC,MAAA,CAAKD,IAAI,EAAoC,GAAGhB,SAAS,CAACgB,IAAI,CAAC;QACnE;MACF;MAEA,IAAIA,IAAI,KAAK,aAAa,IAAIhB,SAAS,CAACkB,KAAK,EAAE;QAC7C,IAAI,CAACV,YAAY,GAAG,gBAAgBW,EAAE,EAAEC,MAAM,EAAEC,MAAM;UACpD,MAAMrB,SAAS,CAACkB,KAAK,CAACC,EAAE,EAAEC,MAAM,CAAC;QACnC,CAAC;MACH;IACF,CAAC,CAAC;IAEF,IAAI,CAAChB,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACF,GAAG,GAAGL,mBAAmB,EAAE;IAChC,IAAI,CAACI,oBAAoB,GAAGA,oBAAoB;IAEhD,IAAI,CAACK,eAAe,GAAG,IAAIgB,OAAO,CAACC,OAAO,IAAG;MAC3C,MAAMC,KAAK,GAAGA,CAAA,KAAK;QACjBD,OAAO,EAAE;QACT,IAAI,CAACjB,eAAe,GAAGgB,OAAO,CAACC,OAAO,EAAE;MAC1C,CAAC;MAED,MAAME,OAAO,GAAGC,UAAU,CAACF,KAAK,EAAE,KAAK,CAAC;MAExC,IAAI,CAACnB,uBAAuB,GAAG,MAAK;QAClCmB,KAAK,EAAE;QACPG,YAAY,CAACF,OAAO,CAAC;MACvB,CAAC;IACH,CAAC,CAAC;EACJ","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"b42f36c015c90b848f2ca43eeb1a9603e57b80a2"}
